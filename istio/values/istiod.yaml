istiod:
  autoscaleEnabled: true
  autoscaleMin: 1
  autoscaleMax: 5
  replicaCount: 1
  variant: "distroless"
  cni:
    enabled: true
    provider: default
  revision: "1-27-1"
  revisionTags:
    - default
    - stable
  meshConfig:
    accessLogFile: /dev/stdout
    accessLogEncoding: JSON
    # enableTracing: true
    # defaultConfig:
    #   tracing:
    #     sampling: 100.0
    #     max_path_tag_length: 256
    #     custom_tags:
    #       clusterID:
    #         environment:
    #           name: ISTIO_META_CLUSTER_ID
    extensionProviders:
      - name: otel-tracing
        opentelemetry:
          service: opentelemetry-collector.observability.svc.cluster.local
          port: 4317
          resource_detectors:
            environment: {}
          grpc:
            timeout: 10s
      - name: otel-logs
        envoyOtelAls:
          service: opentelemetry-collector.observability.svc.cluster.local
          port: 4317
          logFormat:
            labels:
              method: "%REQ(:METHOD)%"
              path: "%REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%"
              protocol: "%PROTOCOL%"
              response_code: "%RESPONSE_CODE%"
              response_flags: "%RESPONSE_FLAGS%"
              response_code_details: "%RESPONSE_CODE_DETAILS%"
              connection_termination_details: "%CONNECTION_TERMINATION_DETAILS%"
              upstream_transport_failure_reason: "%UPSTREAM_TRANSPORT_FAILURE_REASON%"
              bytes_received: "%BYTES_RECEIVED%"
              bytes_sent: "%BYTES_SENT%"
              duration: "%DURATION%"
              upstream_service_time: "%RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%"
              x_forwarded_for: "%REQ(X-FORWARDED-FOR)%"
              user_agent: "%REQ(USER-AGENT)%"
              request_id: "%REQ(X-REQUEST-ID)%"
              authority: "%REQ(:AUTHORITY)%"
              upstream_host: "%UPSTREAM_HOST%"
              upstream_cluster_raw: "%UPSTREAM_CLUSTER_RAW%"
              upstream_local_address: "%UPSTREAM_LOCAL_ADDRESS%"
              downstream_local_address: "%DOWNSTREAM_LOCAL_ADDRESS%"
              downstream_remote_address: "%DOWNSTREAM_REMOTE_ADDRESS%"
              requested_server_name: "%REQUESTED_SERVER_NAME%"
              route_name: "%ROUTE_NAME%"

  global:
    logAsJson: true
    logging:
      level: "default:info"